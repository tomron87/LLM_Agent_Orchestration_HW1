<div dir="rtl">

# ğŸ—ï¸ ××¨×›×™×˜×§×˜×•×¨×” â€” HW1_ai_chat_bot

×”××¡××š ××¦×™×’ ××ª ××‘× ×” ×”××¨×›×™×˜×§×˜×•×¨×” ×©×œ ×”××¢×¨×›×ª â€” **Backend** ×•Ö¾**Frontend** â€” ×ª×•×š ×”×“×’×©×ª ×ª×¤×§×™×“×™×, ×–×¨×™××ª ××™×“×¢, ××‘×˜×—×”, ××©×ª× ×™ ×¡×‘×™×‘×” ×•×‘×“×™×§×•×ª.  
×”××¡××š ×××•×§×“ ×‘××¨×›×™×˜×§×˜×•×¨×” ×•××™× ×• ×›×•×œ×œ ×”×•×¨××•×ª ×”×ª×§× ×” ××¤×•×¨×˜×•×ª.

---

## âš™ï¸ ××‘× ×” ×ª×™×§×™×•×ª ××œ×
<div dir="ltr">

```
HW1_ai_chat_bot/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/routers/chat.py
â”‚   â”œâ”€â”€ core/config.py
â”‚   â”œâ”€â”€ services/ollama_client.py
â”‚   â”œâ”€â”€ services/chat_service.py
â”‚   â””â”€â”€ main.py
â”œâ”€â”€ ui/
â”‚   â””â”€â”€ streamlit_app.py
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_auth_api.py
â”‚   â”œâ”€â”€ test_chat_happy_errors_api.py
â”‚   â”œâ”€â”€ test_chat_validation_api.py
â”‚   â”œâ”€â”€ test_config_settings.py
â”‚   â”œâ”€â”€ test_health_api.py
â”‚   â”œâ”€â”€ test_ollama_client_unit.py
â”‚   â”œâ”€â”€ test_ollama_models_integration.py
â”‚   â”œâ”€â”€ conftest.py
â”‚   â””â”€â”€ pytest.ini
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ preflight.py
â”‚   â””â”€â”€ check_langchain.py
â”œâ”€â”€ documentation/
â”‚   â”œâ”€â”€ PRD.md
â”‚   â”œâ”€â”€ Architecture.md
â”‚   â”œâ”€â”€ Installation_and_Testing.md
â”‚   â”œâ”€â”€ Prompting_and_Developing.md
â”‚   â””â”€â”€ Screenshots_and_Demonstrations.md
â”œâ”€â”€ README.md
â”œâ”€â”€ Makefile
â”œâ”€â”€ .env.example
â”œâ”€â”€ .env
â”œâ”€â”€ requirements.txt
â””â”€â”€  .gitignore
```

---
<div dir="rtl">

## ğŸ§© ×¨×›×™×‘×™ ×”××¢×¨×›×ª ×•×ª×¤×§×™×“×

### ğŸ–¥ï¸ Backend (FastAPI)

| ×¨×›×™×‘ | ×ª×¤×§×™×“ |
|------|--------|
| `app/main.py` | × ×§×•×“×ª ×›× ×™×¡×”; ×™×¦×™×¨×ª ××•×¤×¢ FastAPI ×•×¨×™×©×•× ×”× ×ª×™×‘×™× (`/api/health`, `/api/chat`). |
| `app/api/routers/chat.py` | ×©×›×‘×ª HTTP: ×¡×›×™××•×ª Pydantic (`ChatMessage`, `ChatRequest`, `ChatResponse`), × ×™×ª×•×‘, ×˜×™×¤×•×œ ×‘×©×’×™××•×ª ×œ-HTTP. |
| `app/api/deps.py` | ××™××•×ª ×’×™×©×” ××‘×•×¡×¡ Bearer Token (`require_api_key`). |
| `app/services/chat_service.py` | ×œ×•×’×™×§×” ×¢×¡×§×™×ª: ×‘×“×™×§×ª ×§×™×•× ××•×“×œ, ×§×¨×™××” ×œÖ¾`ollama_client`, ××™×¡×•×£/××™×—×•×“ ×ª×•×¦××” ×œ×¤×•×¨××˜ ××—×™×“ (answer/notice). |
| `app/services/ollama_client.py` | ×©×›×‘×ª ×ª×§×©×•×¨×ª HTTP ×œÖ¾Ollama (`ping`, `has_model`, `chat`) ×¢× ×˜×™×¤×•×œ ×‘×©×’×™××•×ª/timeout. |
| `app/core/config.py` | × ×™×”×•×œ ×§×•× ×¤×™×’×•×¨×¦×™×” ×•×˜×¢×™× ×ª `.env` ×œ××©×ª× ×™ ×¡×‘×™×‘×”. |

#### ×œ×•×’×™×§×ª ×–×¨×™××” ×¢×™×§×¨×™×ª:
1. **×”××©×ª××© ×©×•×œ×— ×‘×§×©×”** â†’ `/api/chat`
2. **×”Ö¾API** ××××ª ××ª ×”×›× ×™×¡×” (`require_api_key`), ×‘×•×“×§ ××ª ××‘× ×” ×”×‘×§×©×” (`ChatRequest`).
3. **×”Ö¾ChatService**:
   - ×‘×•×“×§ ×× ×”××•×“×œ ×§×™×™× (`has_model`)
   - ×× ×œ× â€” ××—×–×™×¨ notice (××•×“×œ ×œ× ××•×ª×§×Ÿ)
   - ×× ×›×Ÿ â€” ×§×•×¨× ×œÖ¾`ollama_client.chat()` ×œ×§×‘×œ×ª ×ª×©×•×‘×”
4. **OllamaClient** ××ª×§×©×¨ ×¢× ×”×©×¨×ª ×”××§×•××™ (`OLLAMA_HOST/api/chat`)
5. **×”Ö¾API** ××—×–×™×¨ ×ª×©×•×‘×” ××•×‘× ×™×ª (JSON ×¢× `answer`, `model`, `session_id`, ×•Ö¾`notice` ×× × ×“×¨×©).

---

### ğŸ’¬ Frontend (Streamlit)

| ×¨×›×™×‘ | ×ª×¤×§×™×“ |
|------|--------|
| `ui/streamlit_app.py` | ×—×œ×•×Ÿ ×¦'××˜; ×§×¨×™××•×ª HTTP ×œÖ¾`API_URL`; ××¦×™×’ ×ª×©×•×‘×ª ××•×“×œ/`notice`. |
| `.env â†’ API_URL` | ×™×¢×“ ×§×¨×™××” ×œÖ¾API (`http://127.0.0.1:8000/api/chat` ×›×‘×¨×™×¨×ª ××—×“×œ). |

#### ×–×¨×™××ª ×¢×‘×•×“×” ×‘Ö¾UI:
1. ×”××©×ª××© ××§×œ×™×“ ×”×•×“×¢×” ×•×œ×•×—×¥ â€œSendâ€
2. ×”Ö¾Streamlit ×©×•×œ×— ×‘×§×©×ª POST ×œÖ¾API_URL
3. ×”×ª×©×•×‘×” ××•×¦×’×ª ×‘×¦×“ ×™××™×Ÿ/×©×××œ ×‘×”×ª×× ×œÖ¾role
4. ×‘××™×“×” ×•×”××•×“×œ ×œ× ××•×ª×§×Ÿ, ××•×¦×’×ª ×”×•×“×¢×ª `notice` ××ª××™××” ×œ××©×ª××©

---
## ğŸ” ×ª×¨×©×™× ×–×¨×™××ª ××™×“×¢

```text
[User / Streamlit UI]
       â”‚  (HTTP POST /api/chat, Bearer)
       â–¼
[FastAPI Router (chat.py)]  â€” ×•×œ×™×“×¦×™×” + ××™×¤×•×™ ×©×’×™××•×ª
       â”‚
       â–¼
[ChatService]  â€” ×‘×“×™×§×ª ××•×“×œ, ×‘×—×™×¨×ª ××•×“×œ, ×§×¨×™××” ×œ×œ×§×•×—
       â”‚
       â–¼
[OllamaClient] â€” HTTP ×œÖ¾{OLLAMA_HOST}/api/chat
       â”‚
       â–¼
[Ollama Server]  â€” ×™×¦×™×¨×ª ×˜×§×¡×˜
       â”‚
       â–¼
[API JSON]  â€” {session_id, answer, model, notice?}
```

---

## ğŸŒ± ××©×ª× ×™ ×¡×‘×™×‘×” (Environment)

| ××¤×ª×— | ×©×™××•×© | ×‘×¨×™×¨×ª ××—×“×œ/×“×•×’××” |
|------|-------|-------------------|
| `APP_API_KEY` | ×˜×•×§×Ÿ ×œÖ¾Bearer ×¢×‘×•×¨ `/api/chat` | ××™×Ÿ ×‘×¨×™×¨×ª ××—×“×œ ×ª×§×¤×” (×™×© ×œ×”×¦×™×‘ ×¢×¨×š ×××™×ª×™) |
| `OLLAMA_HOST` | ×‘×¡×™×¡ ×›×ª×•×‘×ª ×©×¨×ª Ollama | `http://127.0.0.1:11434` |
| `OLLAMA_MODEL` | ×©× ×”××•×“×œ ×”××§×•××™ ×œ×©×™××•×© | `phi` (××• `mistral`/××—×¨) |
| `API_URL` | ×™×¢×“ ×§×¨×™××” ×©×œ ×”Ö¾UI ×œÖ¾API | `http://127.0.0.1:8000/api/chat` |

> ×”××¤×ª×—×•×ª × ×˜×¢× ×™× ×‘Ö¾`app/core/config.py`; ××™×Ÿ ×œ×©××•×¨ ×¡×•×“×•×ª ×‘×§×•×“/×’×™×˜. 

> ×”××¢×¨×›×ª ×œ× ×ª×¢×œ×” ×× ××—×“ ××”××©×ª× ×™× ×—×¡×¨.

---

## ğŸ§ª ×‘×“×™×§×•×ª (QA) â€” ×ª×§×¦×™×¨ ××¨×›×™×˜×§×˜×•× ×™

| ×§×•×‘×¥ / ×¨×›×™×‘ | ×ª×¤×§×™×“ ×¢×™×§×¨×™ |
|--------------|--------------|
| `tests/` | ×›×•×œ×œ ×‘×“×™×§×•×ª ×™×—×™×“×” ×•××™× ×˜×’×¨×¦×™×” ×œ×›×œ ×©×›×‘×•×ª ×”××¢×¨×›×ª. |
| `tests/test_*.py` | ×˜×¡×˜×™ API, ×•×œ×™×“×¦×™×”, ×”×’×“×¨×•×ª ×•×§×•× ×¤×™×’×•×¨×¦×™×”. |
| `tests/test_ollama_client_unit.py` | ×‘×“×™×§×•×ª ×™×—×™×“×” ×œ×©×›×‘×ª ×ª×§×©×•×¨×ª (OllamaClient) â€” ×œ×œ× ×©×¨×ª ×××™×ª×™. |
| `tests/test_ollama_models_integration.py` | ×‘×“×™×§×•×ª ××™× ×˜×’×¨×¦×™×” ××•×œ ×©×¨×ª Ollama ××§×•××™ (`ping`, ×§×™×•× ××•×“×œ×™×). |
| `tests/conftest.py` | Fixtures ××©×•×ª×¤×™×, ×¤×•×¨××˜ ×¤×œ×˜ ××—×™×“, × ×™×”×•×œ expected/actual. |
| `pytest.ini` | ××’×“×™×¨ ××¨×§×¨ ×™×—×™×“ `integration` ×•×¤×¨××˜×¨×™× ×’×œ×•×‘×œ×™×™× ×œ×”×¨×¦×”. |
| `scripts/preflight.py` | ××××ª ×ª×§×™× ×•×ª ×¡×‘×™×‘×” (Python, ×—×‘×™×œ×•×ª, Ollama, ××©×ª× ×™ ×¡×‘×™×‘×”). |

#### ×›×œ×™ ×¤×™×ª×•×— ×•×‘×“×™×§×•×ª
- **Makefile** â€“ ××¨×›×– ××ª ×›×œ ×ª×”×œ×™×š ×”×”×¤×¢×œ×” ×•×”×‘×“×™×§×•×ª (×›×•×œ×œ `preflight`, `install`, `ollama`, `api`, `ui`, ×•Ö¾`test`) ×•××‘×˜×™×— ×”×¨×¦×” ×¢×§×‘×™×ª ×‘×›×œ ×¡×‘×™×‘×”.
- **Pytest markers** â€“ ×××¤×©×¨×™× ×¡×™× ×•×Ÿ ×‘×™×Ÿ ×¡×•×’×™ ×‘×“×™×§×•×ª:
  - `pytest -m "not integration"` â€” ×œ×”×¨×¦×ª ×‘×“×™×§×•×ª ×™×—×™×“×” ×‘×œ×‘×“.  
  - `pytest -m integration` â€” ×œ×”×¨×¦×ª ×‘×“×™×§×•×ª ××™× ×˜×’×¨×¦×™×” ××•×œ ×©×¨×ª ×××™×ª×™.
- **Preflight Script** â€“ ×—×œ×§ ××ª×”×œ×™×š ×”Ö¾QA; ××‘×˜×™×— ×©×¡×‘×™×‘×” ×ª×§×™× ×” ×œ×¤× ×™ ×”×¤×¢×œ×” ××• ×‘×“×™×§×”.

> ×©×›×‘×ª ×”×‘×“×™×§×•×ª ×•×”Ö¾Makefile ××”×•×•×ª ×—×œ×§ ××™× ×˜×’×¨×œ×™ ××”××¨×›×™×˜×§×˜×•×¨×”, ×•××‘×˜×™×—×•×ª ×ª×”×œ×™×š QA ×™×¦×™×‘, ××—×™×“ ×•×‘×¨Ö¾×©×—×–×•×¨ ×‘×›×œ ×¡×‘×™×‘×ª ×”×¨×¦×”.
---

## ğŸ” ××‘×˜×—×” (Security)

- **××™××•×ª**: ×›×œ ×§×¨×™××ª `/api/chat` ×“×•×¨×©×ª `Authorization: Bearer <APP_API_KEY>`; ×‘×“×™×§×” ××ª×‘×¦×¢×ª ×‘Ö¾`require_api_key`.
- **×¡×•×“×•×ª ×‘×§×•×“**: ××™×Ÿ ×¢×¨×›×™× ×§×©×™×—×™×; ×¢×¨×›×™ ××¤×ª×— × ×˜×¢× ×™× ×Ö¾`.env` ×“×¨×š `app/core/config.py`.
- **×©×’×™××•×ª/×œ×•×’×™×**: ××™×¤×•×™ ×—×¨×™×’×•×ª ×œ×©×’×™××•×ª HTTP (401/404/5xx); ×œ×•×’×™× ×‘Ö¾`ollama_client` ×•Ö¾`chat.py` ×œ×œ× ×”×“×œ×¤×ª ×¡×•×“×•×ª.
- **×•×œ×™×“×¦×™×”**: ×¡×›×™××•×ª Pydantic ××•×›×¤×•×ª ××‘× ×”/×˜×™×¤×•×¡×™×; ××’× ×•×ª ××¤× ×™ ×§×œ×˜ ×©×’×•×™.
- **×”×§×©×—×” ××¤×©×¨×™×ª (×‘×¢×ª×™×“)**: rate limiting, CORS ××“×•×™×§, ×”×’×‘×œ×ª ×’×•×“×œ ×‘×§×©×”, sanitization, ×•Ö¾audit logs.

---

## ğŸš€ ×”×¨×—×‘×•×ª ×¢×ª×™×“×™×•×ª (Future Extensions)

- **Streaming** ×©×œ ×ª×©×•×‘×” (SSE/WebSocket) ×•Ö¾partial tokens.
- **× ×™×”×•×œ ×©×™×—×•×ª**: ×–×™×›×¨×•×Ÿ/××—×¡×•×Ÿ session history (DB ×¤×©×•×˜/Redis).
- **Multiâ€‘Model Routing**: ×‘×—×™×¨×” ×“×™× ××™×ª ×©×œ ××•×“×œ ×œ×¤×™ ××¦×‘/×¢×œ×•×ª/latency.
- **×¨×•×‘×¡×˜×™×•×ª**: ×× ×’× ×•×Ÿ retry/backoff, circuit breaker, timeouts ×¤×¨Ö¾×©×›×‘×”.
- **Observability**: Structured logging, metrics (Prometheus), tracing (OTEL).
- **××‘×˜×—×”**: rate limiting, ×§×•×”×•×¨×˜ ×”×¨×©××•×ª, CORS, ×”×’×‘×œ×ª ×’×•×“×œ ×”×•×“×¢×”.
- **Caching**: ×ª×©×•×‘×•×ª ×–×”×•×ª/×“×•××•×ª (embeddings+cache).
- **RAG ××•×¤×¦×™×•× ×œ×™**: ××™× ×“×§×¡ ××¡××›×™×, ×—×™×¤×•×© ×¡×× ×˜×™ (FAISS/Chroma), ×—×™×‘×•×¨ ×œÖ¾LangChain/ LangGraph.
- **UI**: ×”×™×¡×˜×•×¨×™×™×ª ×©×™×—×•×ª, ×”×¢×œ××ª ×§×‘×¦×™×, ×—×™×•×•×™ ×¡×˜×˜×•×¡ ××•×“×œ.

---


## âš¡ ×¡×™×›×•×
- **×”×¤×¨×“×” ×‘×¨×•×¨×”** ×‘×™×Ÿ HTTP, ×œ×•×’×™×§×” ×¢×¡×§×™×ª, ×•×ª×§×©×•×¨×ª ×—×™×¦×•× ×™×ª.
- **×ª×œ×•×™×•×ª ×—×™×¦×•× ×™×•×ª ××‘×•×“×“×•×ª** ×‘×‘×“×™×§×•×ª ×™×—×™×“×” ×‘×××¦×¢×•×ª ××•×§××™× ×’.
- **×§×•× ×¤×™×’×•×¨×¦×™×” × ×§×™×™×”** ×“×¨×š `.env` ×œ×œ× ×¡×•×“×•×ª ×‘×§×•×“.
- **×‘×¡×™×¡ ××•×›×Ÿ ×œ×”×¨×—×‘×•×ª** (Streaming, RAG, observability, ×•×¢×•×“).

</div>
</div>
</div>
